---
title: 京东消费预测搞着玩
categories: 搞着玩
mathjax: true
data: 2017-04-17
---

京东竞赛，搞着玩。购买倾向最高的厕纸，因为是个人就得用，想到买的时候差不多也用完了。233，这种预测系统啥的去死吧。传统挖掘方案，各种人工featuring。记录一下心路历程。

<!-- more -->

一共6个文件，行数大概这样。

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/16/18449013420170417160053029.png?708x303_130>

用户行为数据大概长这样

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/16/18449013420170417161232049.png?720x267_130>

用户数据长这样

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/16/18449013420170417164138059.png?534x269_130>

评论长这样

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/16/18449013420170417164434076.png?809x266_130>

产品列表这样

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/16/18449013420170417164611063.png?354x266_130>

下面一个个做审核

+ 2-4月份的浏览类型：

<img src=http://image18.poco.cn/mypoco/myphoto/20170417/17/18449013420170417173521044.png?1221x775_130>

<img src=http://image18-c.poco.cn/mypoco/myphoto/20170418/10/18449013420170418102209053.png?1193x770_130>

<img src=http://image18-c.poco.cn/mypoco/myphoto/20170418/10/1844901342017041810230602.png?1217x776_130>

+ 抽2月份的细看，三个月的浏览行为应该差不多

规则里面说不会有人一天内同时买两个候选产品，所以抽了一些看看，确定数据里面有没有人一天内买多个产品，然后发现是有的

<img src=http://image18.poco.cn/mypoco/myphoto/20170418/14/18449013420170418143016039.png?671x148_130>

不过前两个sku_id不在候选列表里。这就是说一个用户不会在同一天买两个cate为8的商品。

回顾之前的柱状图，二月整个月下单的数量只有11485次，如果只看2月20-24日，下单数量只有2479个，在候选清单内的有484个。随便截一个5天的时间窗口都差不多，所以预计是一个样本不均比较严重的数据。顺便看看每个月每天下单的订单数。

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/14/18449013420170420145337038.png?1183x683_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/14/18449013420170420145438063.png?1186x676_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/14/18449013420170420145628015.png?1189x679_130>

这个下单量比较吊诡了，2月7-13日是春节，所以这个凹下去的部分貌似可解释。3月15日是什么鬼！！促销吗！！！4月8日又是什么鬼！！还有4月14日还他喵什么鬼！！我猜419杜蕾斯能刷到4k往上！！！尼玛！！！

这是所有购买的情况，接下去看看购买候选清单内商品和非清单内商品的情况。也就是$\text{cate}=8$ 和 $\text{cate} \neq 8$的情况。

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/15/18449013420170420153628057.png?1182x684_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/15/18449013420170420153602041.png?1177x693_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/15/18449013420170420153537027.png?1174x688_130>

总体上看趋势蛮一致的，但是414这天又是什么鬼！！！整体上看图也没看出点什么东西，有几周周一和周五略微上升。

那么第8类商品应该会是什么类型的商品呢？！

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/16/18449013420170420161142065.png?1187x687_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/16/1844901342017042016120906.png?1186x696_130>

<img src=http://image18.poco.cn/mypoco/myphoto/20170420/16/18449013420170420161224096.png?1184x691_130>

总体上看每个月第8类商品的消费都是最高的。难道真是厕纸这种日常消费品？！

用户注册的年份是这样的，没想到有什么用，看着玩。
<img src=http://image18.poco.cn/mypoco/myphoto/20170421/11/18449013420170421114629056.png?1451x821_130>

基本上集中在10-16年，神奇的是居然还有缺失。另外还有一些注册日期在16年4月以后的，不过这都不是事，因为都不在消费行为记录中。

用户年龄是这样的：
<img src=http://image18.poco.cn/mypoco/myphoto/20170421/12/18449013420170421125959074.png?1467x827_130>

脑洞：考虑到大部分都是分类变量，要不后面建模全部embedding掉？！

接下来并表，出于对竞赛数据莫名其妙的信任，我以为不会有重复数据。但是以防万一做了一下，惊奇发现，三个月行为数据拼起来有$50601736 \times 7$而剔除后只有$37087895 \times 7$。少了接近一半啊！！！心中一万头草泥马呼啸而过，我前面做的不是基本白做了嘛！！！虽然只要小改就行，但是神烦啊！！！还是太年轻了，以为流水数据一般都不会发生重复这种神奇的事情。
